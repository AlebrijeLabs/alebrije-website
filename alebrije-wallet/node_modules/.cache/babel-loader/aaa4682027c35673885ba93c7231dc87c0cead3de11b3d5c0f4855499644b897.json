{"ast":null,"code":"import { proxy } from 'valtio/vanilla';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { FetchUtil } from '../utils/FetchUtil.js';\nimport { StorageUtil } from '../utils/StorageUtil.js';\nimport { AccountController } from './AccountController.js';\nimport { ChainController } from './ChainController.js';\nimport { OptionsController } from './OptionsController.js';\nimport { SnackController } from './SnackController.js';\nconst DEFAULT_OPTIONS = {\n  purchaseCurrencies: [{\n    id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n    name: 'USD Coin',\n    symbol: 'USDC',\n    networks: [{\n      name: 'ethereum-mainnet',\n      display_name: 'Ethereum',\n      chain_id: '1',\n      contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n    }, {\n      name: 'polygon-mainnet',\n      display_name: 'Polygon',\n      chain_id: '137',\n      contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n    }]\n  }, {\n    id: '2b92315d-eab7-5bef-84fa-089a131333f5',\n    name: 'Ether',\n    symbol: 'ETH',\n    networks: [{\n      name: 'ethereum-mainnet',\n      display_name: 'Ethereum',\n      chain_id: '1',\n      contract_address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'\n    }, {\n      name: 'polygon-mainnet',\n      display_name: 'Polygon',\n      chain_id: '137',\n      contract_address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174'\n    }]\n  }],\n  paymentCurrencies: [{\n    id: 'USD',\n    payment_method_limits: [{\n      id: 'card',\n      min: '10.00',\n      max: '7500.00'\n    }, {\n      id: 'ach_bank_account',\n      min: '10.00',\n      max: '25000.00'\n    }]\n  }, {\n    id: 'EUR',\n    payment_method_limits: [{\n      id: 'card',\n      min: '10.00',\n      max: '7500.00'\n    }, {\n      id: 'ach_bank_account',\n      min: '10.00',\n      max: '25000.00'\n    }]\n  }]\n};\n// -- Helpers ------------------------------------------- //\nconst baseUrl = CoreHelperUtil.getBlockchainApiUrl();\n// -- State --------------------------------------------- //\nconst state = proxy({\n  clientId: null,\n  api: new FetchUtil({\n    baseUrl,\n    clientId: null\n  }),\n  supportedChains: {\n    http: [],\n    ws: []\n  }\n});\n// -- Controller ---------------------------------------- //\nexport const BlockchainApiController = {\n  state,\n  async get(request) {\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const projectId = OptionsController.state.projectId;\n    const params = {\n      ...(request.params || {}),\n      st,\n      sv,\n      projectId\n    };\n    return state.api.get({\n      ...request,\n      params\n    });\n  },\n  getSdkProperties() {\n    const {\n      sdkType,\n      sdkVersion\n    } = OptionsController.state;\n    return {\n      st: sdkType || 'unknown',\n      sv: sdkVersion || 'unknown'\n    };\n  },\n  async isNetworkSupported(networkId) {\n    if (!networkId) {\n      return false;\n    }\n    try {\n      if (!state.supportedChains.http.length) {\n        await BlockchainApiController.getSupportedNetworks();\n      }\n    } catch (e) {\n      return false;\n    }\n    return state.supportedChains.http.includes(networkId);\n  },\n  async getSupportedNetworks() {\n    const supportedChains = await BlockchainApiController.get({\n      path: 'v1/supported-chains'\n    });\n    state.supportedChains = supportedChains;\n    return supportedChains;\n  },\n  async fetchIdentity(_ref) {\n    let {\n      address,\n      caipNetworkId\n    } = _ref;\n    const isSupported = await BlockchainApiController.isNetworkSupported(caipNetworkId);\n    if (!isSupported) {\n      return {\n        avatar: '',\n        name: ''\n      };\n    }\n    const identityCache = StorageUtil.getIdentityFromCacheForAddress(address);\n    if (identityCache) {\n      return identityCache;\n    }\n    const result = await BlockchainApiController.get({\n      path: `/v1/identity/${address}`,\n      params: {\n        sender: ChainController.state.activeCaipAddress ? CoreHelperUtil.getPlainAddress(ChainController.state.activeCaipAddress) : undefined\n      }\n    });\n    StorageUtil.updateIdentityCache({\n      address,\n      identity: result,\n      timestamp: Date.now()\n    });\n    return result;\n  },\n  async fetchTransactions(_ref2) {\n    let {\n      account,\n      cursor,\n      onramp,\n      signal,\n      cache,\n      chainId\n    } = _ref2;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        data: [],\n        next: undefined\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/account/${account}/history`,\n      params: {\n        cursor,\n        onramp,\n        chainId\n      },\n      signal,\n      cache\n    });\n  },\n  async fetchSwapQuote(_ref3) {\n    let {\n      amount,\n      userAddress,\n      from,\n      to,\n      gasPrice\n    } = _ref3;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        quotes: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/quotes`,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        amount,\n        userAddress,\n        from,\n        to,\n        gasPrice\n      }\n    });\n  },\n  async fetchSwapTokens(_ref4) {\n    let {\n      chainId\n    } = _ref4;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        tokens: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/tokens`,\n      params: {\n        chainId\n      }\n    });\n  },\n  async fetchTokenPrice(_ref5) {\n    let {\n      addresses\n    } = _ref5;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        fungibles: []\n      };\n    }\n    return state.api.post({\n      path: '/v1/fungible/price',\n      body: {\n        currency: 'usd',\n        addresses,\n        projectId: OptionsController.state.projectId\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  async fetchSwapAllowance(_ref6) {\n    let {\n      tokenAddress,\n      userAddress\n    } = _ref6;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        allowance: '0'\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/allowance`,\n      params: {\n        tokenAddress,\n        userAddress\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  async fetchGasPrice(_ref7) {\n    let {\n      chainId\n    } = _ref7;\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Gas Price');\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/gas-price`,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        chainId,\n        st,\n        sv\n      }\n    });\n  },\n  async generateSwapCalldata(_ref8) {\n    let {\n      amount,\n      from,\n      to,\n      userAddress,\n      disableEstimate\n    } = _ref8;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Swaps');\n    }\n    return state.api.post({\n      path: '/v1/convert/build-transaction',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: {\n        amount,\n        eip155: {\n          slippage: ConstantsUtil.CONVERT_SLIPPAGE_TOLERANCE\n        },\n        projectId: OptionsController.state.projectId,\n        from,\n        to,\n        userAddress,\n        disableEstimate\n      }\n    });\n  },\n  async generateApproveCalldata(_ref9) {\n    let {\n      from,\n      to,\n      userAddress\n    } = _ref9;\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      throw new Error('Network not supported for Swaps');\n    }\n    return BlockchainApiController.get({\n      path: `/v1/convert/build-approve`,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      params: {\n        userAddress,\n        from,\n        to,\n        st,\n        sv\n      }\n    });\n  },\n  async getBalance(address, chainId, forceUpdate) {\n    const {\n      st,\n      sv\n    } = BlockchainApiController.getSdkProperties();\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      SnackController.showError('Token Balance Unavailable');\n      return {\n        balances: []\n      };\n    }\n    const caipAddress = `${chainId}:${address}`;\n    const cachedBalance = StorageUtil.getBalanceCacheForCaipAddress(caipAddress);\n    if (cachedBalance) {\n      return cachedBalance;\n    }\n    const balance = await BlockchainApiController.get({\n      path: `/v1/account/${address}/balance`,\n      params: {\n        currency: 'usd',\n        chainId,\n        forceUpdate,\n        st,\n        sv\n      }\n    });\n    StorageUtil.updateBalanceCache({\n      caipAddress,\n      balance,\n      timestamp: Date.now()\n    });\n    return balance;\n  },\n  async lookupEnsName(name) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        addresses: {},\n        attributes: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/profile/account/${name}`,\n      params: {\n        apiVersion: '2'\n      }\n    });\n  },\n  async reverseLookupEnsName(_ref10) {\n    let {\n      address\n    } = _ref10;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return [];\n    }\n    return BlockchainApiController.get({\n      path: `/v1/profile/reverse/${address}`,\n      params: {\n        sender: AccountController.state.address,\n        apiVersion: '2'\n      }\n    });\n  },\n  async getEnsNameSuggestions(name) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        suggestions: []\n      };\n    }\n    return BlockchainApiController.get({\n      path: `/v1/profile/suggestions/${name}`,\n      params: {\n        zone: 'reown.id'\n      }\n    });\n  },\n  async registerEnsName(_ref11) {\n    let {\n      coinType,\n      address,\n      message,\n      signature\n    } = _ref11;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        success: false\n      };\n    }\n    return state.api.post({\n      path: `/v1/profile/account`,\n      body: {\n        coin_type: coinType,\n        address,\n        message,\n        signature\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  },\n  async generateOnRampURL(_ref12) {\n    let {\n      destinationWallets,\n      partnerUserId,\n      defaultNetwork,\n      purchaseAmount,\n      paymentAmount\n    } = _ref12;\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return '';\n    }\n    const response = await state.api.post({\n      path: `/v1/generators/onrampurl`,\n      params: {\n        projectId: OptionsController.state.projectId\n      },\n      body: {\n        destinationWallets,\n        defaultNetwork,\n        partnerUserId,\n        defaultExperience: 'buy',\n        presetCryptoAmount: purchaseAmount,\n        presetFiatAmount: paymentAmount\n      }\n    });\n    return response.url;\n  },\n  async getOnrampOptions() {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        paymentCurrencies: [],\n        purchaseCurrencies: []\n      };\n    }\n    try {\n      const response = await BlockchainApiController.get({\n        path: `/v1/onramp/options`\n      });\n      return response;\n    } catch (e) {\n      return DEFAULT_OPTIONS;\n    }\n  },\n  async getOnrampQuote(_ref13) {\n    let {\n      purchaseCurrency,\n      paymentCurrency,\n      amount,\n      network\n    } = _ref13;\n    try {\n      const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n      if (!isSupported) {\n        return null;\n      }\n      const response = await state.api.post({\n        path: `/v1/onramp/quote`,\n        params: {\n          projectId: OptionsController.state.projectId\n        },\n        body: {\n          purchaseCurrency,\n          paymentCurrency,\n          amount,\n          network\n        }\n      });\n      return response;\n    } catch (e) {\n      // Mocking response as 1:1 until endpoint is ready\n      return {\n        coinbaseFee: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        networkFee: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        paymentSubtotal: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        paymentTotal: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        purchaseAmount: {\n          amount,\n          currency: paymentCurrency.id\n        },\n        quoteId: 'mocked-quote-id'\n      };\n    }\n  },\n  async getSmartSessions(caipAddress) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return [];\n    }\n    return BlockchainApiController.get({\n      path: `/v1/sessions/${caipAddress}`\n    });\n  },\n  async revokeSmartSession(address, pci, signature) {\n    const isSupported = await BlockchainApiController.isNetworkSupported(ChainController.state.activeCaipNetwork?.caipNetworkId);\n    if (!isSupported) {\n      return {\n        success: false\n      };\n    }\n    return state.api.post({\n      path: `/v1/sessions/${address}/revoke`,\n      params: {\n        projectId: OptionsController.state.projectId\n      },\n      body: {\n        pci,\n        signature\n      }\n    });\n  },\n  setClientId(clientId) {\n    state.clientId = clientId;\n    state.api = new FetchUtil({\n      baseUrl,\n      clientId\n    });\n  }\n};","map":{"version":3,"names":["proxy","ConstantsUtil","CoreHelperUtil","FetchUtil","StorageUtil","AccountController","ChainController","OptionsController","SnackController","DEFAULT_OPTIONS","purchaseCurrencies","id","name","symbol","networks","display_name","chain_id","contract_address","paymentCurrencies","payment_method_limits","min","max","baseUrl","getBlockchainApiUrl","state","clientId","api","supportedChains","http","ws","BlockchainApiController","get","request","st","sv","getSdkProperties","projectId","params","sdkType","sdkVersion","isNetworkSupported","networkId","length","getSupportedNetworks","e","includes","path","fetchIdentity","_ref","address","caipNetworkId","isSupported","avatar","identityCache","getIdentityFromCacheForAddress","result","sender","activeCaipAddress","getPlainAddress","undefined","updateIdentityCache","identity","timestamp","Date","now","fetchTransactions","_ref2","account","cursor","onramp","signal","cache","chainId","activeCaipNetwork","data","next","fetchSwapQuote","_ref3","amount","userAddress","from","to","gasPrice","quotes","headers","fetchSwapTokens","_ref4","tokens","fetchTokenPrice","_ref5","addresses","fungibles","post","body","currency","fetchSwapAllowance","_ref6","tokenAddress","allowance","fetchGasPrice","_ref7","Error","generateSwapCalldata","_ref8","disableEstimate","eip155","slippage","CONVERT_SLIPPAGE_TOLERANCE","generateApproveCalldata","_ref9","getBalance","forceUpdate","showError","balances","caipAddress","cachedBalance","getBalanceCacheForCaipAddress","balance","updateBalanceCache","lookupEnsName","attributes","apiVersion","reverseLookupEnsName","_ref10","getEnsNameSuggestions","suggestions","zone","registerEnsName","_ref11","coinType","message","signature","success","coin_type","generateOnRampURL","_ref12","destinationWallets","partnerUserId","defaultNetwork","purchaseAmount","paymentAmount","response","defaultExperience","presetCryptoAmount","presetFiatAmount","url","getOnrampOptions","getOnrampQuote","_ref13","purchaseCurrency","paymentCurrency","network","coinbaseFee","networkFee","paymentSubtotal","paymentTotal","quoteId","getSmartSessions","revokeSmartSession","pci","setClientId"],"sources":["../../../../src/controllers/BlockchainApiController.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}