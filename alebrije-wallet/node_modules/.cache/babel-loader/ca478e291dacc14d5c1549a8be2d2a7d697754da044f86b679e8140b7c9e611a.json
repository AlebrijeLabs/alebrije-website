{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useWallet}from'../contexts/WalletContext';import TokenService from'../services/token-service';import{PublicKey}from'@solana/web3.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TokenTransfer=_ref=>{let{tokenAddress}=_ref;const{connected,currentAccount}=useWallet();const[recipient,setRecipient]=useState('');const[amount,setAmount]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[tokenInfo,setTokenInfo]=useState(null);const[balance,setBalance]=useState(null);useEffect(()=>{if(connected&&tokenAddress){loadTokenInfo();loadBalance();}},[connected,tokenAddress,currentAccount]);const loadTokenInfo=async()=>{try{const info=await TokenService.getTokenInfo(tokenAddress);setTokenInfo(info);}catch(err){console.error('Failed to load token info:',err);}};const loadBalance=async()=>{if(!currentAccount)return;try{const balance=await TokenService.getTokenBalance(tokenAddress,currentAccount);setBalance(balance);}catch(err){console.error('Failed to load balance:',err);}};const handleTransfer=async e=>{e.preventDefault();if(!connected||!currentAccount){setError('Wallet not connected');return;}if(!recipient||!amount){setError('Please fill in all fields');return;}// Basic validation\ntry{new PublicKey(recipient);}catch(err){setError('Invalid recipient address');return;}const amountValue=parseFloat(amount);if(isNaN(amountValue)||amountValue<=0){setError('Invalid amount');return;}setLoading(true);setError(null);setSuccess(null);try{const result=await TokenService.transferToken(tokenAddress,currentAccount,recipient,amountValue);setSuccess(`Successfully transferred ${amount} ${(tokenInfo===null||tokenInfo===void 0?void 0:tokenInfo.symbol)||'tokens'} to ${recipient.slice(0,6)}...${recipient.slice(-4)}`);setRecipient('');setAmount('');// Refresh balance\nloadBalance();}catch(err){setError(err.message||'Transfer failed');}finally{setLoading(false);}};if(!connected){return/*#__PURE__*/_jsxs(\"div\",{className:\"token-transfer-container p-4 border rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Token Transfer\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Connect your wallet to transfer tokens\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"token-transfer-container p-4 border rounded\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Transfer \",(tokenInfo===null||tokenInfo===void 0?void 0:tokenInfo.symbol)||'Tokens']}),balance!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Your balance: \",balance,\" \",(tokenInfo===null||tokenInfo===void 0?void 0:tokenInfo.symbol)||'tokens']})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mb-3\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success mb-3\",children:success}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleTransfer,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"recipient\",className:\"form-label\",children:\"Recipient Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"recipient\",value:recipient,onChange:e=>setRecipient(e.target.value),placeholder:\"Enter Solana address\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",className:\"form-label\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"amount\",value:amount,onChange:e=>setAmount(e.target.value),placeholder:\"0.0\",step:\"0.000001\",min:\"0\",disabled:loading})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",disabled:loading||!recipient||!amount,children:loading?'Processing...':'Transfer Tokens'})]})]});};export default TokenTransfer;","map":{"version":3,"names":["React","useState","useEffect","useWallet","TokenService","PublicKey","jsx","_jsx","jsxs","_jsxs","TokenTransfer","_ref","tokenAddress","connected","currentAccount","recipient","setRecipient","amount","setAmount","loading","setLoading","error","setError","success","setSuccess","tokenInfo","setTokenInfo","balance","setBalance","loadTokenInfo","loadBalance","info","getTokenInfo","err","console","getTokenBalance","handleTransfer","e","preventDefault","amountValue","parseFloat","isNaN","result","transferToken","symbol","slice","message","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","disabled","step","min"],"sources":["/Users/rastavo/alebrije-project/alebrije-wallet/src/components/TokenTransfer.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useWallet } from '../contexts/WalletContext';\nimport TokenService from '../services/token-service';\nimport { PublicKey } from '@solana/web3.js';\n\nconst TokenTransfer = ({ tokenAddress }) => {\n  const { connected, currentAccount } = useWallet();\n  const [recipient, setRecipient] = useState('');\n  const [amount, setAmount] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [tokenInfo, setTokenInfo] = useState(null);\n  const [balance, setBalance] = useState(null);\n\n  useEffect(() => {\n    if (connected && tokenAddress) {\n      loadTokenInfo();\n      loadBalance();\n    }\n  }, [connected, tokenAddress, currentAccount]);\n\n  const loadTokenInfo = async () => {\n    try {\n      const info = await TokenService.getTokenInfo(tokenAddress);\n      setTokenInfo(info);\n    } catch (err) {\n      console.error('Failed to load token info:', err);\n    }\n  };\n\n  const loadBalance = async () => {\n    if (!currentAccount) return;\n    \n    try {\n      const balance = await TokenService.getTokenBalance(tokenAddress, currentAccount);\n      setBalance(balance);\n    } catch (err) {\n      console.error('Failed to load balance:', err);\n    }\n  };\n\n  const handleTransfer = async (e) => {\n    e.preventDefault();\n    \n    if (!connected || !currentAccount) {\n      setError('Wallet not connected');\n      return;\n    }\n    \n    if (!recipient || !amount) {\n      setError('Please fill in all fields');\n      return;\n    }\n    \n    // Basic validation\n    try {\n      new PublicKey(recipient);\n    } catch (err) {\n      setError('Invalid recipient address');\n      return;\n    }\n    \n    const amountValue = parseFloat(amount);\n    if (isNaN(amountValue) || amountValue <= 0) {\n      setError('Invalid amount');\n      return;\n    }\n    \n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n    \n    try {\n      const result = await TokenService.transferToken(\n        tokenAddress,\n        currentAccount,\n        recipient,\n        amountValue\n      );\n      \n      setSuccess(`Successfully transferred ${amount} ${tokenInfo?.symbol || 'tokens'} to ${recipient.slice(0, 6)}...${recipient.slice(-4)}`);\n      setRecipient('');\n      setAmount('');\n      \n      // Refresh balance\n      loadBalance();\n    } catch (err) {\n      setError(err.message || 'Transfer failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!connected) {\n    return (\n      <div className=\"token-transfer-container p-4 border rounded\">\n        <h3>Token Transfer</h3>\n        <p className=\"text-muted\">Connect your wallet to transfer tokens</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"token-transfer-container p-4 border rounded\">\n      <h3>Transfer {tokenInfo?.symbol || 'Tokens'}</h3>\n      \n      {balance !== null && (\n        <div className=\"mb-3\">\n          <p>Your balance: {balance} {tokenInfo?.symbol || 'tokens'}</p>\n        </div>\n      )}\n      \n      {error && (\n        <div className=\"alert alert-danger mb-3\">\n          {error}\n        </div>\n      )}\n      \n      {success && (\n        <div className=\"alert alert-success mb-3\">\n          {success}\n        </div>\n      )}\n      \n      <form onSubmit={handleTransfer}>\n        <div className=\"mb-3\">\n          <label htmlFor=\"recipient\" className=\"form-label\">Recipient Address</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"recipient\"\n            value={recipient}\n            onChange={(e) => setRecipient(e.target.value)}\n            placeholder=\"Enter Solana address\"\n            disabled={loading}\n          />\n        </div>\n        \n        <div className=\"mb-3\">\n          <label htmlFor=\"amount\" className=\"form-label\">Amount</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            id=\"amount\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n            placeholder=\"0.0\"\n            step=\"0.000001\"\n            min=\"0\"\n            disabled={loading}\n          />\n        </div>\n        \n        <button\n          type=\"submit\"\n          className=\"btn btn-primary w-100\"\n          disabled={loading || !recipient || !amount}\n        >\n          {loading ? 'Processing...' : 'Transfer Tokens'}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default TokenTransfer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}