{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Spinner}from'react-bootstrap';import TokenService from'../services/token-service';import WalletService from'../services/wallet-service';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TokenBalance=_ref=>{let{tokenAddress='native'}=_ref;const[balance,setBalance]=useState(null);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[tokenInfo,setTokenInfo]=useState(null);const loadBalance=async()=>{if(!WalletService.isConnected()){setError('Wallet not connected');return;}setIsLoading(true);setError(null);try{const account=WalletService.getCurrentAccount();let balanceValue;if(tokenAddress==='native'){balanceValue=await TokenService.getNativeBalance(account);}else{balanceValue=await TokenService.getTokenBalance(tokenAddress,account);}setBalance(balanceValue);if(!tokenInfo){const info=await TokenService.getTokenInfo(tokenAddress);if(info){setTokenInfo(info);}}}catch(err){setError(err.message||'Failed to load balance');console.error('Balance loading error:',err);}finally{setIsLoading(false);}};useEffect(()=>{if(WalletService.isConnected()){loadBalance();}const unsubscribe=WalletService.onAccountsChanged(()=>{loadBalance();});return()=>{if(unsubscribe)unsubscribe();};},[tokenAddress]);return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Balance\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:tokenAddress==='native'?'SOL':(tokenInfo===null||tokenInfo===void 0?void 0:tokenInfo.symbol)||'Tokens'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted\",children:isLoading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\"}):`${balance!==null?balance:'0'} ${tokenAddress==='native'?'SOL':(tokenInfo===null||tokenInfo===void 0?void 0:tokenInfo.symbol)||'tokens'}`})]})})})]})});};export default TokenBalance;","map":{"version":3,"names":["React","useState","useEffect","Card","Spinner","TokenService","WalletService","jsx","_jsx","jsxs","_jsxs","TokenBalance","_ref","tokenAddress","balance","setBalance","isLoading","setIsLoading","error","setError","tokenInfo","setTokenInfo","loadBalance","isConnected","account","getCurrentAccount","balanceValue","getNativeBalance","getTokenBalance","info","getTokenInfo","err","message","console","unsubscribe","onAccountsChanged","children","Body","Title","className","symbol","animation","size"],"sources":["/Users/rastavo/alebrije-project/alebrije-wallet/src/components/TokenBalance.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, Spinner } from 'react-bootstrap';\nimport TokenService from '../services/token-service';\nimport WalletService from '../services/wallet-service';\n\nconst TokenBalance = ({ tokenAddress = 'native' }) => {\n  const [balance, setBalance] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [tokenInfo, setTokenInfo] = useState(null);\n  \n  const loadBalance = async () => {\n    if (!WalletService.isConnected()) {\n      setError('Wallet not connected');\n      return;\n    }\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const account = WalletService.getCurrentAccount();\n      let balanceValue;\n      \n      if (tokenAddress === 'native') {\n        balanceValue = await TokenService.getNativeBalance(account);\n      } else {\n        balanceValue = await TokenService.getTokenBalance(tokenAddress, account);\n      }\n      \n      setBalance(balanceValue);\n      \n      if (!tokenInfo) {\n        const info = await TokenService.getTokenInfo(tokenAddress);\n        if (info) {\n          setTokenInfo(info);\n        }\n      }\n    } catch (err) {\n      setError(err.message || 'Failed to load balance');\n      console.error('Balance loading error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  useEffect(() => {\n    if (WalletService.isConnected()) {\n      loadBalance();\n    }\n    \n    const unsubscribe = WalletService.onAccountsChanged(() => {\n      loadBalance();\n    });\n    \n    return () => {\n      if (unsubscribe) unsubscribe();\n    };\n  }, [tokenAddress]);\n  \n  return (\n    <Card>\n      <Card.Body>\n        <Card.Title>Balance</Card.Title>\n        \n        {error && <div className=\"alert alert-danger\">{error}</div>}\n        \n        <div className=\"mb-4\">\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <div>\n              <strong>{tokenAddress === 'native' ? 'SOL' : tokenInfo?.symbol || 'Tokens'}</strong>\n              <div className=\"text-muted\">\n                {isLoading ? (\n                  <Spinner animation=\"border\" size=\"sm\" />\n                ) : (\n                  `${balance !== null ? balance : '0'} ${tokenAddress === 'native' ? 'SOL' : tokenInfo?.symbol || 'tokens'}`\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default TokenBalance; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}