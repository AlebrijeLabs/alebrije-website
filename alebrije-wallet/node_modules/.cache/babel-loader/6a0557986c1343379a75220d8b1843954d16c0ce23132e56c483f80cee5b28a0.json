{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WebsocketClient = exports.WebsocketError = void 0;\nconst tslib_1 = require(\"tslib\");\nconst ws_1 = tslib_1.__importDefault(require(\"ws\"));\nconst utils_1 = require(\"@trezor/utils\");\nconst DEFAULT_TIMEOUT = 20 * 1000;\nconst DEFAULT_PING_TIMEOUT = 50 * 1000;\nclass WebsocketError extends Error {}\nexports.WebsocketError = WebsocketError;\nclass WebsocketClient extends utils_1.TypedEmitter {\n  options;\n  messages;\n  emitter = this;\n  ws;\n  pingTimeout;\n  connectPromise;\n  ping() {\n    return this.sendMessage({\n      type: 'ping'\n    });\n  }\n  constructor(options) {\n    super();\n    this.options = options;\n    this.messages = (0, utils_1.createDeferredManager)({\n      timeout: this.options.timeout || DEFAULT_TIMEOUT,\n      onTimeout: this.onTimeout.bind(this)\n    });\n  }\n  initWebsocket(_ref) {\n    let {\n      url,\n      timeout,\n      headers,\n      agent\n    } = _ref;\n    if (typeof url !== 'string') {\n      throw new WebsocketError('websocket_no_url');\n    }\n    if (url.startsWith('http')) {\n      url = url.replace('http', 'ws');\n    }\n    return new ws_1.default(url, {\n      timeout,\n      headers,\n      agent\n    });\n  }\n  setPingTimeout() {\n    clearTimeout(this.pingTimeout);\n    const doPing = () => {\n      if (this.isConnected()) {\n        return this.onPing().catch(() => {});\n      }\n    };\n    this.pingTimeout = this.isConnected() ? setTimeout(doPing, this.options.pingTimeout || DEFAULT_PING_TIMEOUT) : undefined;\n  }\n  onPing() {\n    return this.ping();\n  }\n  onTimeout() {\n    const {\n      ws\n    } = this;\n    if (!ws) return;\n    this.messages.rejectAll(new WebsocketError('websocket_timeout'));\n    ws.close();\n  }\n  onError() {\n    this.onClose();\n  }\n  sendMessage(message) {\n    let {\n      timeout\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      ws\n    } = this;\n    if (!ws || !this.isConnected()) throw new WebsocketError('websocket_not_initialized');\n    const {\n      promiseId,\n      promise\n    } = this.messages.create(timeout);\n    const req = {\n      id: promiseId.toString(),\n      ...message\n    };\n    this.setPingTimeout();\n    this.options.onSending?.(message);\n    ws.send(JSON.stringify(req));\n    return promise;\n  }\n  sendRawMessage(message) {\n    const {\n      ws\n    } = this;\n    if (!ws || !this.isConnected()) throw new WebsocketError('websocket_not_initialized');\n    ws.send(message, {\n      binary: typeof message !== 'string'\n    });\n    this.setPingTimeout();\n  }\n  onMessage(message, messageValidation) {\n    try {\n      const data = JSON.parse(message.toString());\n      const messageId = Number(data.id);\n      try {\n        const payload = messageValidation ? messageValidation(data) : data;\n        if (payload) {\n          this.messages.resolve(messageId, payload);\n        }\n      } catch (error) {\n        this.messages.reject(messageId, error);\n      }\n    } catch {} finally {\n      this.setPingTimeout();\n    }\n  }\n  async connect() {\n    if (this.connectPromise) {\n      return this.connectPromise;\n    }\n    if (this.isConnected()) return Promise.resolve();\n    if (this.ws?.readyState === ws_1.default.CLOSING) {\n      await new Promise(resolve => this.emitter.once('disconnected', resolve));\n    }\n    const dfd = (0, utils_1.createDeferred)();\n    this.connectPromise = dfd.promise;\n    const ws = this.createWebsocket ? this.createWebsocket() : this.initWebsocket(this.options);\n    const connectionTimeout = setTimeout(() => {\n      this.onClose();\n      dfd.reject(new WebsocketError('websocket_timeout'));\n      try {\n        ws.close();\n      } catch {}\n    }, this.options.connectionTimeout || this.options.timeout || DEFAULT_TIMEOUT);\n    ws.once('error', error => {\n      clearTimeout(connectionTimeout);\n      this.onClose();\n      dfd.reject(new WebsocketError(error.message));\n    });\n    ws.on('open', () => {\n      clearTimeout(connectionTimeout);\n      this.init();\n      dfd.resolve();\n    });\n    this.ws = ws;\n    return dfd.promise.finally(() => {\n      this.connectPromise = undefined;\n    });\n  }\n  init() {\n    const {\n      ws\n    } = this;\n    if (!ws || !this.isConnected()) {\n      throw Error('Websocket init cannot be called');\n    }\n    ws.removeAllListeners();\n    ws.on('error', _error => this.onError());\n    ws.on('message', message => this.onMessage(message));\n    ws.on('close', () => {\n      this.emitter.emit('disconnected');\n      this.onClose();\n    });\n  }\n  disconnect() {\n    if (this.isConnected()) {\n      const disconnectPromise = new Promise(resolve => {\n        this.ws?.once('close', resolve);\n      });\n      this.ws?.close();\n      return disconnectPromise;\n    }\n    return Promise.resolve();\n  }\n  isConnected() {\n    return this.ws?.readyState === ws_1.default.OPEN;\n  }\n  onClose() {\n    clearTimeout(this.pingTimeout);\n    this.ws?.removeAllListeners();\n    this.ws?.on('error', () => {});\n    this.messages.rejectAll(new WebsocketError('Websocket closed unexpectedly'));\n  }\n  dispose() {\n    this.removeAllListeners();\n    this.disconnect();\n    this.onClose();\n  }\n}\nexports.WebsocketClient = WebsocketClient;","map":{"version":3,"names":["Object","defineProperty","exports","value","WebsocketClient","WebsocketError","tslib_1","require","ws_1","__importDefault","utils_1","DEFAULT_TIMEOUT","DEFAULT_PING_TIMEOUT","Error","TypedEmitter","options","messages","emitter","ws","pingTimeout","connectPromise","ping","sendMessage","type","constructor","createDeferredManager","timeout","onTimeout","bind","initWebsocket","_ref","url","headers","agent","startsWith","replace","default","setPingTimeout","clearTimeout","doPing","isConnected","onPing","catch","setTimeout","undefined","rejectAll","close","onError","onClose","message","arguments","length","promiseId","promise","create","req","id","toString","onSending","send","JSON","stringify","sendRawMessage","binary","onMessage","messageValidation","data","parse","messageId","Number","payload","resolve","error","reject","connect","Promise","readyState","CLOSING","once","dfd","createDeferred","createWebsocket","connectionTimeout","on","init","finally","removeAllListeners","_error","emit","disconnect","disconnectPromise","OPEN","dispose"],"sources":["/Users/rastavo/alebrije-project/alebrije-wallet/node_modules/@trezor/websocket-client/lib/client.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebsocketClient = exports.WebsocketError = void 0;\nconst tslib_1 = require(\"tslib\");\nconst ws_1 = tslib_1.__importDefault(require(\"ws\"));\nconst utils_1 = require(\"@trezor/utils\");\nconst DEFAULT_TIMEOUT = 20 * 1000;\nconst DEFAULT_PING_TIMEOUT = 50 * 1000;\nclass WebsocketError extends Error {\n}\nexports.WebsocketError = WebsocketError;\nclass WebsocketClient extends utils_1.TypedEmitter {\n    options;\n    messages;\n    emitter = this;\n    ws;\n    pingTimeout;\n    connectPromise;\n    ping() {\n        return this.sendMessage({ type: 'ping' });\n    }\n    constructor(options) {\n        super();\n        this.options = options;\n        this.messages = (0, utils_1.createDeferredManager)({\n            timeout: this.options.timeout || DEFAULT_TIMEOUT,\n            onTimeout: this.onTimeout.bind(this),\n        });\n    }\n    initWebsocket({ url, timeout, headers, agent }) {\n        if (typeof url !== 'string') {\n            throw new WebsocketError('websocket_no_url');\n        }\n        if (url.startsWith('http')) {\n            url = url.replace('http', 'ws');\n        }\n        return new ws_1.default(url, { timeout, headers, agent });\n    }\n    setPingTimeout() {\n        clearTimeout(this.pingTimeout);\n        const doPing = () => {\n            if (this.isConnected()) {\n                return this.onPing().catch(() => { });\n            }\n        };\n        this.pingTimeout = this.isConnected()\n            ? setTimeout(doPing, this.options.pingTimeout || DEFAULT_PING_TIMEOUT)\n            : undefined;\n    }\n    onPing() {\n        return this.ping();\n    }\n    onTimeout() {\n        const { ws } = this;\n        if (!ws)\n            return;\n        this.messages.rejectAll(new WebsocketError('websocket_timeout'));\n        ws.close();\n    }\n    onError() {\n        this.onClose();\n    }\n    sendMessage(message, { timeout } = {}) {\n        const { ws } = this;\n        if (!ws || !this.isConnected())\n            throw new WebsocketError('websocket_not_initialized');\n        const { promiseId, promise } = this.messages.create(timeout);\n        const req = { id: promiseId.toString(), ...message };\n        this.setPingTimeout();\n        this.options.onSending?.(message);\n        ws.send(JSON.stringify(req));\n        return promise;\n    }\n    sendRawMessage(message) {\n        const { ws } = this;\n        if (!ws || !this.isConnected())\n            throw new WebsocketError('websocket_not_initialized');\n        ws.send(message, {\n            binary: typeof message !== 'string',\n        });\n        this.setPingTimeout();\n    }\n    onMessage(message, messageValidation) {\n        try {\n            const data = JSON.parse(message.toString());\n            const messageId = Number(data.id);\n            try {\n                const payload = messageValidation ? messageValidation(data) : data;\n                if (payload) {\n                    this.messages.resolve(messageId, payload);\n                }\n            }\n            catch (error) {\n                this.messages.reject(messageId, error);\n            }\n        }\n        catch {\n        }\n        finally {\n            this.setPingTimeout();\n        }\n    }\n    async connect() {\n        if (this.connectPromise) {\n            return this.connectPromise;\n        }\n        if (this.isConnected())\n            return Promise.resolve();\n        if (this.ws?.readyState === ws_1.default.CLOSING) {\n            await new Promise(resolve => this.emitter.once('disconnected', resolve));\n        }\n        const dfd = (0, utils_1.createDeferred)();\n        this.connectPromise = dfd.promise;\n        const ws = this.createWebsocket ? this.createWebsocket() : this.initWebsocket(this.options);\n        const connectionTimeout = setTimeout(() => {\n            this.onClose();\n            dfd.reject(new WebsocketError('websocket_timeout'));\n            try {\n                ws.close();\n            }\n            catch {\n            }\n        }, this.options.connectionTimeout || this.options.timeout || DEFAULT_TIMEOUT);\n        ws.once('error', error => {\n            clearTimeout(connectionTimeout);\n            this.onClose();\n            dfd.reject(new WebsocketError(error.message));\n        });\n        ws.on('open', () => {\n            clearTimeout(connectionTimeout);\n            this.init();\n            dfd.resolve();\n        });\n        this.ws = ws;\n        return dfd.promise.finally(() => {\n            this.connectPromise = undefined;\n        });\n    }\n    init() {\n        const { ws } = this;\n        if (!ws || !this.isConnected()) {\n            throw Error('Websocket init cannot be called');\n        }\n        ws.removeAllListeners();\n        ws.on('error', _error => this.onError());\n        ws.on('message', message => this.onMessage(message));\n        ws.on('close', () => {\n            this.emitter.emit('disconnected');\n            this.onClose();\n        });\n    }\n    disconnect() {\n        if (this.isConnected()) {\n            const disconnectPromise = new Promise(resolve => {\n                this.ws?.once('close', resolve);\n            });\n            this.ws?.close();\n            return disconnectPromise;\n        }\n        return Promise.resolve();\n    }\n    isConnected() {\n        return this.ws?.readyState === ws_1.default.OPEN;\n    }\n    onClose() {\n        clearTimeout(this.pingTimeout);\n        this.ws?.removeAllListeners();\n        this.ws?.on('error', () => {\n        });\n        this.messages.rejectAll(new WebsocketError('Websocket closed unexpectedly'));\n    }\n    dispose() {\n        this.removeAllListeners();\n        this.disconnect();\n        this.onClose();\n    }\n}\nexports.WebsocketClient = WebsocketClient;\n//# sourceMappingURL=client.js.map"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,eAAe,GAAGF,OAAO,CAACG,cAAc,GAAG,KAAK,CAAC;AACzD,MAAMC,OAAO,GAAGC,OAAO,CAAC,OAAO,CAAC;AAChC,MAAMC,IAAI,GAAGF,OAAO,CAACG,eAAe,CAACF,OAAO,CAAC,IAAI,CAAC,CAAC;AACnD,MAAMG,OAAO,GAAGH,OAAO,CAAC,eAAe,CAAC;AACxC,MAAMI,eAAe,GAAG,EAAE,GAAG,IAAI;AACjC,MAAMC,oBAAoB,GAAG,EAAE,GAAG,IAAI;AACtC,MAAMP,cAAc,SAASQ,KAAK,CAAC;AAEnCX,OAAO,CAACG,cAAc,GAAGA,cAAc;AACvC,MAAMD,eAAe,SAASM,OAAO,CAACI,YAAY,CAAC;EAC/CC,OAAO;EACPC,QAAQ;EACRC,OAAO,GAAG,IAAI;EACdC,EAAE;EACFC,WAAW;EACXC,cAAc;EACdC,IAAIA,CAAA,EAAG;IACH,OAAO,IAAI,CAACC,WAAW,CAAC;MAAEC,IAAI,EAAE;IAAO,CAAC,CAAC;EAC7C;EACAC,WAAWA,CAACT,OAAO,EAAE;IACjB,KAAK,CAAC,CAAC;IACP,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC,EAAEN,OAAO,CAACe,qBAAqB,EAAE;MAC/CC,OAAO,EAAE,IAAI,CAACX,OAAO,CAACW,OAAO,IAAIf,eAAe;MAChDgB,SAAS,EAAE,IAAI,CAACA,SAAS,CAACC,IAAI,CAAC,IAAI;IACvC,CAAC,CAAC;EACN;EACAC,aAAaA,CAAAC,IAAA,EAAmC;IAAA,IAAlC;MAAEC,GAAG;MAAEL,OAAO;MAAEM,OAAO;MAAEC;IAAM,CAAC,GAAAH,IAAA;IAC1C,IAAI,OAAOC,GAAG,KAAK,QAAQ,EAAE;MACzB,MAAM,IAAI1B,cAAc,CAAC,kBAAkB,CAAC;IAChD;IACA,IAAI0B,GAAG,CAACG,UAAU,CAAC,MAAM,CAAC,EAAE;MACxBH,GAAG,GAAGA,GAAG,CAACI,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC;IACnC;IACA,OAAO,IAAI3B,IAAI,CAAC4B,OAAO,CAACL,GAAG,EAAE;MAAEL,OAAO;MAAEM,OAAO;MAAEC;IAAM,CAAC,CAAC;EAC7D;EACAI,cAAcA,CAAA,EAAG;IACbC,YAAY,CAAC,IAAI,CAACnB,WAAW,CAAC;IAC9B,MAAMoB,MAAM,GAAGA,CAAA,KAAM;MACjB,IAAI,IAAI,CAACC,WAAW,CAAC,CAAC,EAAE;QACpB,OAAO,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAE,CAAC,CAAC;MACzC;IACJ,CAAC;IACD,IAAI,CAACvB,WAAW,GAAG,IAAI,CAACqB,WAAW,CAAC,CAAC,GAC/BG,UAAU,CAACJ,MAAM,EAAE,IAAI,CAACxB,OAAO,CAACI,WAAW,IAAIP,oBAAoB,CAAC,GACpEgC,SAAS;EACnB;EACAH,MAAMA,CAAA,EAAG;IACL,OAAO,IAAI,CAACpB,IAAI,CAAC,CAAC;EACtB;EACAM,SAASA,CAAA,EAAG;IACR,MAAM;MAAET;IAAG,CAAC,GAAG,IAAI;IACnB,IAAI,CAACA,EAAE,EACH;IACJ,IAAI,CAACF,QAAQ,CAAC6B,SAAS,CAAC,IAAIxC,cAAc,CAAC,mBAAmB,CAAC,CAAC;IAChEa,EAAE,CAAC4B,KAAK,CAAC,CAAC;EACd;EACAC,OAAOA,CAAA,EAAG;IACN,IAAI,CAACC,OAAO,CAAC,CAAC;EAClB;EACA1B,WAAWA,CAAC2B,OAAO,EAAoB;IAAA,IAAlB;MAAEvB;IAAQ,CAAC,GAAAwB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAN,SAAA,GAAAM,SAAA,MAAG,CAAC,CAAC;IACjC,MAAM;MAAEhC;IAAG,CAAC,GAAG,IAAI;IACnB,IAAI,CAACA,EAAE,IAAI,CAAC,IAAI,CAACsB,WAAW,CAAC,CAAC,EAC1B,MAAM,IAAInC,cAAc,CAAC,2BAA2B,CAAC;IACzD,MAAM;MAAE+C,SAAS;MAAEC;IAAQ,CAAC,GAAG,IAAI,CAACrC,QAAQ,CAACsC,MAAM,CAAC5B,OAAO,CAAC;IAC5D,MAAM6B,GAAG,GAAG;MAAEC,EAAE,EAAEJ,SAAS,CAACK,QAAQ,CAAC,CAAC;MAAE,GAAGR;IAAQ,CAAC;IACpD,IAAI,CAACZ,cAAc,CAAC,CAAC;IACrB,IAAI,CAACtB,OAAO,CAAC2C,SAAS,GAAGT,OAAO,CAAC;IACjC/B,EAAE,CAACyC,IAAI,CAACC,IAAI,CAACC,SAAS,CAACN,GAAG,CAAC,CAAC;IAC5B,OAAOF,OAAO;EAClB;EACAS,cAAcA,CAACb,OAAO,EAAE;IACpB,MAAM;MAAE/B;IAAG,CAAC,GAAG,IAAI;IACnB,IAAI,CAACA,EAAE,IAAI,CAAC,IAAI,CAACsB,WAAW,CAAC,CAAC,EAC1B,MAAM,IAAInC,cAAc,CAAC,2BAA2B,CAAC;IACzDa,EAAE,CAACyC,IAAI,CAACV,OAAO,EAAE;MACbc,MAAM,EAAE,OAAOd,OAAO,KAAK;IAC/B,CAAC,CAAC;IACF,IAAI,CAACZ,cAAc,CAAC,CAAC;EACzB;EACA2B,SAASA,CAACf,OAAO,EAAEgB,iBAAiB,EAAE;IAClC,IAAI;MACA,MAAMC,IAAI,GAAGN,IAAI,CAACO,KAAK,CAAClB,OAAO,CAACQ,QAAQ,CAAC,CAAC,CAAC;MAC3C,MAAMW,SAAS,GAAGC,MAAM,CAACH,IAAI,CAACV,EAAE,CAAC;MACjC,IAAI;QACA,MAAMc,OAAO,GAAGL,iBAAiB,GAAGA,iBAAiB,CAACC,IAAI,CAAC,GAAGA,IAAI;QAClE,IAAII,OAAO,EAAE;UACT,IAAI,CAACtD,QAAQ,CAACuD,OAAO,CAACH,SAAS,EAAEE,OAAO,CAAC;QAC7C;MACJ,CAAC,CACD,OAAOE,KAAK,EAAE;QACV,IAAI,CAACxD,QAAQ,CAACyD,MAAM,CAACL,SAAS,EAAEI,KAAK,CAAC;MAC1C;IACJ,CAAC,CACD,MAAM,CACN,CAAC,SACO;MACJ,IAAI,CAACnC,cAAc,CAAC,CAAC;IACzB;EACJ;EACA,MAAMqC,OAAOA,CAAA,EAAG;IACZ,IAAI,IAAI,CAACtD,cAAc,EAAE;MACrB,OAAO,IAAI,CAACA,cAAc;IAC9B;IACA,IAAI,IAAI,CAACoB,WAAW,CAAC,CAAC,EAClB,OAAOmC,OAAO,CAACJ,OAAO,CAAC,CAAC;IAC5B,IAAI,IAAI,CAACrD,EAAE,EAAE0D,UAAU,KAAKpE,IAAI,CAAC4B,OAAO,CAACyC,OAAO,EAAE;MAC9C,MAAM,IAAIF,OAAO,CAACJ,OAAO,IAAI,IAAI,CAACtD,OAAO,CAAC6D,IAAI,CAAC,cAAc,EAAEP,OAAO,CAAC,CAAC;IAC5E;IACA,MAAMQ,GAAG,GAAG,CAAC,CAAC,EAAErE,OAAO,CAACsE,cAAc,EAAE,CAAC;IACzC,IAAI,CAAC5D,cAAc,GAAG2D,GAAG,CAAC1B,OAAO;IACjC,MAAMnC,EAAE,GAAG,IAAI,CAAC+D,eAAe,GAAG,IAAI,CAACA,eAAe,CAAC,CAAC,GAAG,IAAI,CAACpD,aAAa,CAAC,IAAI,CAACd,OAAO,CAAC;IAC3F,MAAMmE,iBAAiB,GAAGvC,UAAU,CAAC,MAAM;MACvC,IAAI,CAACK,OAAO,CAAC,CAAC;MACd+B,GAAG,CAACN,MAAM,CAAC,IAAIpE,cAAc,CAAC,mBAAmB,CAAC,CAAC;MACnD,IAAI;QACAa,EAAE,CAAC4B,KAAK,CAAC,CAAC;MACd,CAAC,CACD,MAAM,CACN;IACJ,CAAC,EAAE,IAAI,CAAC/B,OAAO,CAACmE,iBAAiB,IAAI,IAAI,CAACnE,OAAO,CAACW,OAAO,IAAIf,eAAe,CAAC;IAC7EO,EAAE,CAAC4D,IAAI,CAAC,OAAO,EAAEN,KAAK,IAAI;MACtBlC,YAAY,CAAC4C,iBAAiB,CAAC;MAC/B,IAAI,CAAClC,OAAO,CAAC,CAAC;MACd+B,GAAG,CAACN,MAAM,CAAC,IAAIpE,cAAc,CAACmE,KAAK,CAACvB,OAAO,CAAC,CAAC;IACjD,CAAC,CAAC;IACF/B,EAAE,CAACiE,EAAE,CAAC,MAAM,EAAE,MAAM;MAChB7C,YAAY,CAAC4C,iBAAiB,CAAC;MAC/B,IAAI,CAACE,IAAI,CAAC,CAAC;MACXL,GAAG,CAACR,OAAO,CAAC,CAAC;IACjB,CAAC,CAAC;IACF,IAAI,CAACrD,EAAE,GAAGA,EAAE;IACZ,OAAO6D,GAAG,CAAC1B,OAAO,CAACgC,OAAO,CAAC,MAAM;MAC7B,IAAI,CAACjE,cAAc,GAAGwB,SAAS;IACnC,CAAC,CAAC;EACN;EACAwC,IAAIA,CAAA,EAAG;IACH,MAAM;MAAElE;IAAG,CAAC,GAAG,IAAI;IACnB,IAAI,CAACA,EAAE,IAAI,CAAC,IAAI,CAACsB,WAAW,CAAC,CAAC,EAAE;MAC5B,MAAM3B,KAAK,CAAC,iCAAiC,CAAC;IAClD;IACAK,EAAE,CAACoE,kBAAkB,CAAC,CAAC;IACvBpE,EAAE,CAACiE,EAAE,CAAC,OAAO,EAAEI,MAAM,IAAI,IAAI,CAACxC,OAAO,CAAC,CAAC,CAAC;IACxC7B,EAAE,CAACiE,EAAE,CAAC,SAAS,EAAElC,OAAO,IAAI,IAAI,CAACe,SAAS,CAACf,OAAO,CAAC,CAAC;IACpD/B,EAAE,CAACiE,EAAE,CAAC,OAAO,EAAE,MAAM;MACjB,IAAI,CAAClE,OAAO,CAACuE,IAAI,CAAC,cAAc,CAAC;MACjC,IAAI,CAACxC,OAAO,CAAC,CAAC;IAClB,CAAC,CAAC;EACN;EACAyC,UAAUA,CAAA,EAAG;IACT,IAAI,IAAI,CAACjD,WAAW,CAAC,CAAC,EAAE;MACpB,MAAMkD,iBAAiB,GAAG,IAAIf,OAAO,CAACJ,OAAO,IAAI;QAC7C,IAAI,CAACrD,EAAE,EAAE4D,IAAI,CAAC,OAAO,EAAEP,OAAO,CAAC;MACnC,CAAC,CAAC;MACF,IAAI,CAACrD,EAAE,EAAE4B,KAAK,CAAC,CAAC;MAChB,OAAO4C,iBAAiB;IAC5B;IACA,OAAOf,OAAO,CAACJ,OAAO,CAAC,CAAC;EAC5B;EACA/B,WAAWA,CAAA,EAAG;IACV,OAAO,IAAI,CAACtB,EAAE,EAAE0D,UAAU,KAAKpE,IAAI,CAAC4B,OAAO,CAACuD,IAAI;EACpD;EACA3C,OAAOA,CAAA,EAAG;IACNV,YAAY,CAAC,IAAI,CAACnB,WAAW,CAAC;IAC9B,IAAI,CAACD,EAAE,EAAEoE,kBAAkB,CAAC,CAAC;IAC7B,IAAI,CAACpE,EAAE,EAAEiE,EAAE,CAAC,OAAO,EAAE,MAAM,CAC3B,CAAC,CAAC;IACF,IAAI,CAACnE,QAAQ,CAAC6B,SAAS,CAAC,IAAIxC,cAAc,CAAC,+BAA+B,CAAC,CAAC;EAChF;EACAuF,OAAOA,CAAA,EAAG;IACN,IAAI,CAACN,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAACG,UAAU,CAAC,CAAC;IACjB,IAAI,CAACzC,OAAO,CAAC,CAAC;EAClB;AACJ;AACA9C,OAAO,CAACE,eAAe,GAAGA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}