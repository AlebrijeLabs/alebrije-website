{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Tab,Nav,Alert}from'react-bootstrap';import WalletConnect from'./WalletConnect';import TokenBalance from'./TokenBalance';import TokenTransfer from'./TokenTransfer';import TransactionHistory from'./TransactionHistory';import TransactionDetails from'./TransactionDetails';import ErrorDisplay from'./ErrorDisplay';import WalletService from'../services/wallet-service';import TokenService from'../services/token-service';import config from'../config';import{withErrorBoundary}from'../utils/error-handler';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Wallet=()=>{const[activeToken,setActiveToken]=useState(null);const[availableTokens,setAvailableTokens]=useState([]);const[error,setError]=useState(null);const[selectedTransaction,setSelectedTransaction]=useState(null);const[showTransactionDetails,setShowTransactionDetails]=useState(false);useEffect(()=>{// Get available tokens from config\nconst tokens=Object.keys(config.TOKEN_ADDRESSES);setAvailableTokens(tokens);// Set default active token\nif(tokens.length>0&&!activeToken){setActiveToken(tokens[0]);}// Initialize wallet service\nconst initWallet=async()=>{try{// Try to connect if previously connected\nif(localStorage.getItem('walletConnected')==='true'){await WalletService.connect();}}catch(err){console.error('Failed to auto-connect wallet:',err);// Don't show error for auto-connect failures\n}};initWallet();// Cleanup on unmount\nreturn()=>{// Any cleanup needed\n};},[]);const handleSelectToken=token=>{setActiveToken(token);};const handleTransactionClick=transaction=>{setSelectedTransaction(transaction);setShowTransactionDetails(true);};return/*#__PURE__*/_jsxs(Container,{className:\"wallet-container my-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(WalletConnect,{})})}),error&&/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(ErrorDisplay,{error:error,onDismiss:()=>setError(null)})})}),availableTokens.length===0?/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:\"No tokens configured. Please add token configurations to your config file.\"})})}):/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Tab.Container,{activeKey:activeToken||availableTokens[0],onSelect:handleSelectToken,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Nav,{variant:\"pills\",className:\"flex-column\",children:availableTokens.map(token=>/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:token,children:token})},token))})}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(Tab.Content,{children:availableTokens.map(token=>/*#__PURE__*/_jsxs(Tab.Pane,{eventKey:token,children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(TokenBalance,{tokenName:token})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(TokenTransfer,{tokenName:token})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(TransactionHistory,{tokenName:token,onTransactionClick:handleTransactionClick})})})]},token))})})]})})})}),/*#__PURE__*/_jsx(TransactionDetails,{transaction:selectedTransaction,tokenName:activeToken,show:showTransactionDetails,onHide:()=>setShowTransactionDetails(false)})]});};// Wrap with error boundary\nexport default withErrorBoundary(Wallet,error=>/*#__PURE__*/_jsx(Container,{className:\"my-4\",children:/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"Something went wrong\"}),/*#__PURE__*/_jsx(\"p\",{children:error.getUserMessage()}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Please refresh the page and try again. If the problem persists, contact support.\"})]})}));","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Tab","Nav","Alert","WalletConnect","TokenBalance","TokenTransfer","TransactionHistory","TransactionDetails","ErrorDisplay","WalletService","TokenService","config","withErrorBoundary","jsx","_jsx","jsxs","_jsxs","Wallet","activeToken","setActiveToken","availableTokens","setAvailableTokens","error","setError","selectedTransaction","setSelectedTransaction","showTransactionDetails","setShowTransactionDetails","tokens","Object","keys","TOKEN_ADDRESSES","length","initWallet","localStorage","getItem","connect","err","console","handleSelectToken","token","handleTransactionClick","transaction","className","children","onDismiss","variant","activeKey","onSelect","md","map","Item","Link","eventKey","Content","Pane","tokenName","onTransactionClick","show","onHide","Heading","getUserMessage"],"sources":["/Users/rastavo/alebrije-project/alebrije-wallet/src/components/Wallet.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Tab, Nav, Alert } from 'react-bootstrap';\nimport WalletConnect from './WalletConnect';\nimport TokenBalance from './TokenBalance';\nimport TokenTransfer from './TokenTransfer';\nimport TransactionHistory from './TransactionHistory';\nimport TransactionDetails from './TransactionDetails';\nimport ErrorDisplay from './ErrorDisplay';\nimport WalletService from '../services/wallet-service';\nimport TokenService from '../services/token-service';\nimport config from '../config';\nimport { withErrorBoundary } from '../utils/error-handler';\n\nconst Wallet = () => {\n  const [activeToken, setActiveToken] = useState(null);\n  const [availableTokens, setAvailableTokens] = useState([]);\n  const [error, setError] = useState(null);\n  const [selectedTransaction, setSelectedTransaction] = useState(null);\n  const [showTransactionDetails, setShowTransactionDetails] = useState(false);\n  \n  useEffect(() => {\n    // Get available tokens from config\n    const tokens = Object.keys(config.TOKEN_ADDRESSES);\n    setAvailableTokens(tokens);\n    \n    // Set default active token\n    if (tokens.length > 0 && !activeToken) {\n      setActiveToken(tokens[0]);\n    }\n    \n    // Initialize wallet service\n    const initWallet = async () => {\n      try {\n        // Try to connect if previously connected\n        if (localStorage.getItem('walletConnected') === 'true') {\n          await WalletService.connect();\n        }\n      } catch (err) {\n        console.error('Failed to auto-connect wallet:', err);\n        // Don't show error for auto-connect failures\n      }\n    };\n    \n    initWallet();\n    \n    // Cleanup on unmount\n    return () => {\n      // Any cleanup needed\n    };\n  }, []);\n  \n  const handleSelectToken = (token) => {\n    setActiveToken(token);\n  };\n  \n  const handleTransactionClick = (transaction) => {\n    setSelectedTransaction(transaction);\n    setShowTransactionDetails(true);\n  };\n  \n  return (\n    <Container className=\"wallet-container my-4\">\n      <Row className=\"mb-4\">\n        <Col>\n          <WalletConnect />\n        </Col>\n      </Row>\n      \n      {error && (\n        <Row className=\"mb-4\">\n          <Col>\n            <ErrorDisplay \n              error={error} \n              onDismiss={() => setError(null)} \n            />\n          </Col>\n        </Row>\n      )}\n      \n      {availableTokens.length === 0 ? (\n        <Row>\n          <Col>\n            <Alert variant=\"warning\">\n              No tokens configured. Please add token configurations to your config file.\n            </Alert>\n          </Col>\n        </Row>\n      ) : (\n        <Row>\n          <Col>\n            <Tab.Container \n              activeKey={activeToken || availableTokens[0]} \n              onSelect={handleSelectToken}\n            >\n              <Row>\n                <Col md={3}>\n                  <Nav variant=\"pills\" className=\"flex-column\">\n                    {availableTokens.map(token => (\n                      <Nav.Item key={token}>\n                        <Nav.Link eventKey={token}>{token}</Nav.Link>\n                      </Nav.Item>\n                    ))}\n                  </Nav>\n                </Col>\n                <Col md={9}>\n                  <Tab.Content>\n                    {availableTokens.map(token => (\n                      <Tab.Pane key={token} eventKey={token}>\n                        <Row className=\"mb-4\">\n                          <Col md={6}>\n                            <TokenBalance tokenName={token} />\n                          </Col>\n                          <Col md={6}>\n                            <TokenTransfer tokenName={token} />\n                          </Col>\n                        </Row>\n                        <Row>\n                          <Col>\n                            <TransactionHistory \n                              tokenName={token} \n                              onTransactionClick={handleTransactionClick}\n                            />\n                          </Col>\n                        </Row>\n                      </Tab.Pane>\n                    ))}\n                  </Tab.Content>\n                </Col>\n              </Row>\n            </Tab.Container>\n          </Col>\n        </Row>\n      )}\n      \n      <TransactionDetails \n        transaction={selectedTransaction}\n        tokenName={activeToken}\n        show={showTransactionDetails}\n        onHide={() => setShowTransactionDetails(false)}\n      />\n    </Container>\n  );\n};\n\n// Wrap with error boundary\nexport default withErrorBoundary(Wallet, (error) => (\n  <Container className=\"my-4\">\n    <Alert variant=\"danger\">\n      <Alert.Heading>Something went wrong</Alert.Heading>\n      <p>{error.getUserMessage()}</p>\n      <hr />\n      <p className=\"mb-0\">\n        Please refresh the page and try again. If the problem persists, contact support.\n      </p>\n    </Alert>\n  </Container>\n)); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}