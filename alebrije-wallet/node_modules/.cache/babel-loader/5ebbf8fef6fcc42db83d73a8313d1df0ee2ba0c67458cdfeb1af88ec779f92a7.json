{"ast":null,"code":"import { ConstantsUtil as CommonConstants } from '@reown/appkit-common';\nimport { ConstantsUtil } from './ConstantsUtil.js';\nimport { StorageUtil } from './StorageUtil.js';\nexport const CoreHelperUtil = {\n  isMobile() {\n    if (this.isClient()) {\n      return Boolean(window?.matchMedia('(pointer:coarse)')?.matches || /Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent));\n    }\n    return false;\n  },\n  checkCaipNetwork(network) {\n    let networkName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    return network?.caipNetworkId.toLocaleLowerCase().includes(networkName.toLowerCase());\n  },\n  isAndroid() {\n    if (!this.isMobile()) {\n      return false;\n    }\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return CoreHelperUtil.isMobile() && ua.includes('android');\n  },\n  isIos() {\n    if (!this.isMobile()) {\n      return false;\n    }\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return ua.includes('iphone') || ua.includes('ipad');\n  },\n  isSafari() {\n    if (!this.isClient()) {\n      return false;\n    }\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return ua.includes('safari');\n  },\n  isClient() {\n    return typeof window !== 'undefined';\n  },\n  isPairingExpired(expiry) {\n    return expiry ? expiry - Date.now() <= ConstantsUtil.TEN_SEC_MS : true;\n  },\n  isAllowedRetry(lastRetry) {\n    let differenceMs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ConstantsUtil.ONE_SEC_MS;\n    return Date.now() - lastRetry >= differenceMs;\n  },\n  copyToClopboard(text) {\n    navigator.clipboard.writeText(text);\n  },\n  isIframe() {\n    try {\n      return window?.self !== window?.top;\n    } catch (e) {\n      return false;\n    }\n  },\n  getPairingExpiry() {\n    return Date.now() + ConstantsUtil.FOUR_MINUTES_MS;\n  },\n  getNetworkId(caipAddress) {\n    return caipAddress?.split(':')[1];\n  },\n  getPlainAddress(caipAddress) {\n    return caipAddress?.split(':')[2];\n  },\n  async wait(milliseconds) {\n    return new Promise(resolve => {\n      setTimeout(resolve, milliseconds);\n    });\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  debounce(func) {\n    let timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n    let timer = undefined;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      function next() {\n        func(...args);\n      }\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(next, timeout);\n    };\n  },\n  isHttpUrl(url) {\n    return url.startsWith('http://') || url.startsWith('https://');\n  },\n  formatNativeUrl(appUrl, wcUri) {\n    if (CoreHelperUtil.isHttpUrl(appUrl)) {\n      return this.formatUniversalUrl(appUrl, wcUri);\n    }\n    let safeAppUrl = appUrl;\n    if (!safeAppUrl.includes('://')) {\n      safeAppUrl = appUrl.replaceAll('/', '').replaceAll(':', '');\n      safeAppUrl = `${safeAppUrl}://`;\n    }\n    if (!safeAppUrl.endsWith('/')) {\n      safeAppUrl = `${safeAppUrl}/`;\n    }\n    // Android deeplinks in tg context require the uri to be encoded twice\n    if (this.isTelegram() && this.isAndroid()) {\n      // eslint-disable-next-line no-param-reassign\n      wcUri = encodeURIComponent(wcUri);\n    }\n    const encodedWcUrl = encodeURIComponent(wcUri);\n    return {\n      redirect: `${safeAppUrl}wc?uri=${encodedWcUrl}`,\n      href: safeAppUrl\n    };\n  },\n  formatUniversalUrl(appUrl, wcUri) {\n    if (!CoreHelperUtil.isHttpUrl(appUrl)) {\n      return this.formatNativeUrl(appUrl, wcUri);\n    }\n    let safeAppUrl = appUrl;\n    if (!safeAppUrl.endsWith('/')) {\n      safeAppUrl = `${safeAppUrl}/`;\n    }\n    const encodedWcUrl = encodeURIComponent(wcUri);\n    return {\n      redirect: `${safeAppUrl}wc?uri=${encodedWcUrl}`,\n      href: safeAppUrl\n    };\n  },\n  getOpenTargetForPlatform(target) {\n    if (target === 'popupWindow') {\n      return target;\n    }\n    // Only '_blank' deeplinks work in Telegram context\n    if (this.isTelegram()) {\n      // But for social login, we need to load the page in the same context\n      if (StorageUtil.getTelegramSocialProvider()) {\n        return '_top';\n      }\n      return '_blank';\n    }\n    return target;\n  },\n  openHref(href, target, features) {\n    window?.open(href, this.getOpenTargetForPlatform(target), features || 'noreferrer noopener');\n  },\n  returnOpenHref(href, target, features) {\n    return window?.open(href, this.getOpenTargetForPlatform(target), features || 'noreferrer noopener');\n  },\n  isTelegram() {\n    return typeof window !== 'undefined' && (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.TelegramWebviewProxy) ||\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.Telegram) ||\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.TelegramWebviewProxyProto));\n  },\n  async preloadImage(src) {\n    const imagePromise = new Promise((resolve, reject) => {\n      const image = new Image();\n      image.onload = resolve;\n      image.onerror = reject;\n      image.crossOrigin = 'anonymous';\n      image.src = src;\n    });\n    return Promise.race([imagePromise, CoreHelperUtil.wait(2000)]);\n  },\n  formatBalance(balance, symbol) {\n    let formattedBalance = '0.000';\n    if (typeof balance === 'string') {\n      const number = Number(balance);\n      if (number) {\n        const formattedValue = Math.floor(number * 1000) / 1000;\n        if (formattedValue) {\n          formattedBalance = formattedValue.toString();\n        }\n      }\n    }\n    return `${formattedBalance}${symbol ? ` ${symbol}` : ''}`;\n  },\n  formatBalance2(balance, symbol) {\n    let formattedBalance = undefined;\n    if (balance === '0') {\n      formattedBalance = '0';\n    } else if (typeof balance === 'string') {\n      const number = Number(balance);\n      if (number) {\n        formattedBalance = number.toString().match(/^-?\\d+(?:\\.\\d{0,3})?/u)?.[0];\n      }\n    }\n    return {\n      value: formattedBalance ?? '0',\n      rest: formattedBalance === '0' ? '000' : '',\n      symbol\n    };\n  },\n  getApiUrl() {\n    return CommonConstants.W3M_API_URL;\n  },\n  getBlockchainApiUrl() {\n    return CommonConstants.BLOCKCHAIN_API_RPC_URL;\n  },\n  getAnalyticsUrl() {\n    return CommonConstants.PULSE_API_URL;\n  },\n  getUUID() {\n    if (crypto?.randomUUID) {\n      return crypto.randomUUID();\n    }\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/gu, c => {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  parseError(error) {\n    if (typeof error === 'string') {\n      return error;\n    } else if (typeof error?.issues?.[0]?.message === 'string') {\n      return error.issues[0].message;\n    } else if (error instanceof Error) {\n      return error.message;\n    }\n    return 'Unknown error';\n  },\n  sortRequestedNetworks(approvedIds) {\n    let requestedNetworks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    const approvedIndexMap = {};\n    if (requestedNetworks && approvedIds) {\n      approvedIds.forEach((id, index) => {\n        approvedIndexMap[id] = index;\n      });\n      requestedNetworks.sort((a, b) => {\n        const indexA = approvedIndexMap[a.id];\n        const indexB = approvedIndexMap[b.id];\n        if (indexA !== undefined && indexB !== undefined) {\n          return indexA - indexB;\n        } else if (indexA !== undefined) {\n          return -1;\n        } else if (indexB !== undefined) {\n          return 1;\n        }\n        return 0;\n      });\n    }\n    return requestedNetworks;\n  },\n  calculateBalance(array) {\n    let sum = 0;\n    for (const item of array) {\n      sum += item.value ?? 0;\n    }\n    return sum;\n  },\n  formatTokenBalance(number) {\n    const roundedNumber = number.toFixed(2);\n    const [dollars, pennies] = roundedNumber.split('.');\n    return {\n      dollars,\n      pennies\n    };\n  },\n  isAddress(address) {\n    let chain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'eip155';\n    switch (chain) {\n      case 'eip155':\n        if (!/^(?:0x)?[0-9a-f]{40}$/iu.test(address)) {\n          return false;\n        } else if (/^(?:0x)?[0-9a-f]{40}$/iu.test(address) || /^(?:0x)?[0-9A-F]{40}$/iu.test(address)) {\n          return true;\n        }\n        return false;\n      case 'solana':\n        return /[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(address);\n      default:\n        return false;\n    }\n  },\n  uniqueBy(arr, key) {\n    const set = new Set();\n    return arr.filter(item => {\n      const keyValue = item[key];\n      if (set.has(keyValue)) {\n        return false;\n      }\n      set.add(keyValue);\n      return true;\n    });\n  },\n  generateSdkVersion(adapters, platform, version) {\n    const hasNoAdapters = adapters.length === 0;\n    const adapterNames = hasNoAdapters ? ConstantsUtil.ADAPTER_TYPES.UNIVERSAL : adapters.map(adapter => adapter.adapterType).join(',');\n    return `${platform}-${adapterNames}-${version}`;\n  },\n  // eslint-disable-next-line max-params\n  createAccount(namespace, address, type, publicKey, path) {\n    return {\n      namespace,\n      address,\n      type,\n      publicKey,\n      path\n    };\n  },\n  isCaipAddress(address) {\n    if (typeof address !== 'string') {\n      return false;\n    }\n    const sections = address.split(':');\n    const namespace = sections[0];\n    return sections.filter(Boolean).length === 3 && namespace in CommonConstants.CHAIN_NAME_MAP;\n  },\n  isMac() {\n    const ua = window?.navigator.userAgent.toLowerCase();\n    return ua.includes('macintosh') && !ua.includes('safari');\n  },\n  formatTelegramSocialLoginUrl(url) {\n    const valueToInject = `--${encodeURIComponent(window?.location.href)}`;\n    const paramToInject = 'state=';\n    const parsedUrl = new URL(url);\n    if (parsedUrl.host === 'auth.magic.link') {\n      const providerParam = 'provider_authorization_url=';\n      const providerUrl = url.substring(url.indexOf(providerParam) + providerParam.length);\n      const resultUrl = this.injectIntoUrl(decodeURIComponent(providerUrl), paramToInject, valueToInject);\n      return url.replace(providerUrl, encodeURIComponent(resultUrl));\n    }\n    return this.injectIntoUrl(url, paramToInject, valueToInject);\n  },\n  injectIntoUrl(url, key, appendString) {\n    // Find the position of \"key\" e.g. \"state=\" in the URL\n    const keyIndex = url.indexOf(key);\n    if (keyIndex === -1) {\n      throw new Error(`${key} parameter not found in the URL: ${url}`);\n    }\n    // Find the position of the next \"&\" after \"key\"\n    const keyEndIndex = url.indexOf('&', keyIndex);\n    const keyLength = key.length;\n    // If there is no \"&\" after key, it means \"key\" is the last parameter\n    // eslint-disable-next-line no-negated-condition\n    const keyParamEnd = keyEndIndex !== -1 ? keyEndIndex : url.length;\n    // Extract the part of the URL before the key value\n    const beforeKeyValue = url.substring(0, keyIndex + keyLength);\n    // Extract the current key value\n    const currentKeyValue = url.substring(keyIndex + keyLength, keyParamEnd);\n    // Extract the part of the URL after the key value\n    const afterKeyValue = url.substring(keyEndIndex);\n    // Append the new string to the key value\n    const newKeyValue = currentKeyValue + appendString;\n    // Reconstruct the URL with the appended key value\n    const newUrl = beforeKeyValue + newKeyValue + afterKeyValue;\n    return newUrl;\n  }\n};","map":{"version":3,"names":["ConstantsUtil","CommonConstants","StorageUtil","CoreHelperUtil","isMobile","isClient","Boolean","window","matchMedia","matches","test","navigator","userAgent","checkCaipNetwork","network","networkName","arguments","length","undefined","caipNetworkId","toLocaleLowerCase","includes","toLowerCase","isAndroid","ua","isIos","isSafari","isPairingExpired","expiry","Date","now","TEN_SEC_MS","isAllowedRetry","lastRetry","differenceMs","ONE_SEC_MS","copyToClopboard","text","clipboard","writeText","isIframe","self","top","e","getPairingExpiry","FOUR_MINUTES_MS","getNetworkId","caipAddress","split","getPlainAddress","wait","milliseconds","Promise","resolve","setTimeout","debounce","func","timeout","timer","_len","args","Array","_key","next","clearTimeout","isHttpUrl","url","startsWith","formatNativeUrl","appUrl","wcUri","formatUniversalUrl","safeAppUrl","replaceAll","endsWith","isTelegram","encodeURIComponent","encodedWcUrl","redirect","href","getOpenTargetForPlatform","target","getTelegramSocialProvider","openHref","features","open","returnOpenHref","TelegramWebviewProxy","Telegram","TelegramWebviewProxyProto","preloadImage","src","imagePromise","reject","image","Image","onload","onerror","crossOrigin","race","formatBalance","balance","symbol","formattedBalance","number","Number","formattedValue","Math","floor","toString","formatBalance2","match","value","rest","getApiUrl","W3M_API_URL","getBlockchainApiUrl","BLOCKCHAIN_API_RPC_URL","getAnalyticsUrl","PULSE_API_URL","getUUID","crypto","randomUUID","replace","c","r","random","v","parseError","error","issues","message","Error","sortRequestedNetworks","approvedIds","requestedNetworks","approvedIndexMap","forEach","id","index","sort","a","b","indexA","indexB","calculateBalance","array","sum","item","formatTokenBalance","roundedNumber","toFixed","dollars","pennies","isAddress","address","chain","uniqueBy","arr","key","set","Set","filter","keyValue","has","add","generateSdkVersion","adapters","platform","version","hasNoAdapters","adapterNames","ADAPTER_TYPES","UNIVERSAL","map","adapter","adapterType","join","createAccount","namespace","type","publicKey","path","isCaipAddress","sections","CHAIN_NAME_MAP","isMac","formatTelegramSocialLoginUrl","valueToInject","location","paramToInject","parsedUrl","URL","host","providerParam","providerUrl","substring","indexOf","resultUrl","injectIntoUrl","decodeURIComponent","appendString","keyIndex","keyEndIndex","keyLength","keyParamEnd","beforeKeyValue","currentKeyValue","afterKeyValue","newKeyValue","newUrl"],"sources":["../../../../src/utils/CoreHelperUtil.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}